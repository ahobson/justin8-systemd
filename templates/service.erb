[Unit]
Description=<%= @description %>
<% if !@defaultdeps -%>
DefaultDependencies=no
<% end -%>
<% if @requires.any? -%>
Requires=<%= @requires.sort.join(' ') %>
<% end -%>
<% if @wants.any? -%>
Wants=<%= @wants.sort.join(' ') %>
<% end -%>
<% if @after.any? -%>
After=<%= @after.sort.join(' ') %>
<% end -%>

[Service]
ExecStart=<%= @execstart %>
<% if defined?(@execreload) -%>
ExecReload=<%= @execreload %>
<% end -%>
<% if defined?(@execstop) -%>
ExecStop=<%= @execstop %>
<% end -%>
<% if defined?(@workingdir) -%>
WorkingDirectory=<%= @workingdir %>
<% end -%>
Restart=<%= @restart %>
<% if defined?(@restartsec) -%>
RestartSec=<%= @restartsec %>
<% end -%>
StandardOutput=syslog
StandardError=syslog
SyslogIdentifier=<%= @servicename %>
User=<%= @user %>
Group=<%= @group %>
<% if @forking -%>
Type=forking
<% end -%>

[Install]
WantedBy=<%= @wantedby.sort.join(' ') %>
